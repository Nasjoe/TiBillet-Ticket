{% extends base_template %}
{% load tibitags %}

{% block title %}{{ event.name }}{% endblock %}

{% block main %}
<main class="container-lg pb-5">
    <header class="mb-3">
      <img style="background-color: var(--kouler-sousou); max-height: 33vh;"
        src="{{ event.img|randImg }}"
        class="d-block w-100 mb-3 object-fit-cover"
        alt="{{ event.name }}">
      <h1>
        <small>
            {{ event.datetime|date:'l j F'|capfirst }} <br />
            {{ event.datetime|time:'H\hi' }} <br />
        </small>
        {{ event.name }}
      </h1>
    </header>
  
    <!-- tags -->
    <p>
        {% for tag  in event.tag.all %}
        <span class="badge text-bg-info me-1">{{ tag }}</span>
        {% endfor %}
    </p>
  
    <p class="lead">{{ event.short_description }}</p>
    
    {% if event.gallery %}
    <div id="eventCarousel" class="carousel slide mb-3">
      <div class="carousel-inner" style="max-height: 33vh;">
        <div class="carousel-item active">
          <img style="background-color: var(--kouler-kari)" src="../../assets/motif/sevronkler.svg" class="d-inline-block w-50"
            alt="..."><img style="background-color: var(--kouler-losean)" src="../../assets/motif/sevronkler.svg" class="d-inline-block w-50"
            alt="...">
        </div>
        <div class="carousel-item">
          <img style="background-color: var(--kouler-letsi)" src="../../assets/motif/sevronkler.svg" class="d-inline-block w-50"
            alt="..."><img style="background-color: var(--kouler-piton)" src="../../assets/motif/sevronkler.svg" class="d-inline-block w-50"
            alt="...">
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#eventCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#eventCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
    {% endif %}
  
    {% if event.products.count %}
    {% include 'reunion/partials/event/booking.html' %}
    {% else %}
    <a href="#" class="btn btn-lg btn-primary d-block mb-5 disabled" role="button" aria-disabled="true">
        Entr√©e libre
    </a>
    {% endif %}
  
    <!-- info sections -->
    <div class="accordion accordion-flush mb-3" id="infoAccordion">
      {% if event.long_description %}
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button text-dark"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#schedule"
            aria-expanded="true"
            aria-controls="schedule"
            style="background: var(--mayaj-pons);">
            Programme
          </button>
        </h2>
        <div id="schedule" class="accordion-collapse collapse show" data-bs-parent="#infoAccordion">
          <div class="accordion-body">
            <p>{{ event.long_description }}</p>
          </div>
        </div>
      </div>
      {% endif %}
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button collapsed text-dark"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#timeAndPlace"
            aria-expanded="false"
            aria-controls="timeAndPlace"
            style="background: var(--mayaj-pons);">
            Heure et lieu
          </button>
        </h2>
        <div id="timeAndPlace" class="accordion-collapse collapse" data-bs-parent="#infoAccordion">
          <div class="accordion-body">
            <ul class="list-group list-group-horizontal-xl w-100">
              <li class="list-group-item border-start-0 border-end-0 rounded-0 px-0 py-3 p-xl-5">
                <i class="bi bi-calendar-check me-3"></i>
                {{ event.datetime|date:'j F Y, H:i' }}
              </li>
              <li class="list-group-item border-start-0 border-end-0 px-0 py-3 p-xl-5">
                <i class="bi bi-geo-alt-fill me-3"></i>
                {{ event.postal_address.street_address }}<br/>
                {{ event.postal_address.postal_code }} {{ event.postal_address.address_locality }}
              </li>
              <li class="list-group-item border-start-0 border-end-0 rounded-0 px-0 py-3 p-xl-5 flex-fill">
                <i class="bi bi-bus-front-fill me-3"></i>
                {{ event.postal_address.comment }}
              </li>
            </ul>
          </div>
        </div>
      </div>
  
  </main>
  {% endblock %}
