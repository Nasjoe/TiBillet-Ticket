{% extends base_template %}
{% load tibitags %}

{% block title %}{{ event.name }}{% endblock %}

{% block main %}
<main class="container-lg">
    <header class="mb-3">
      <img style="background-color: var(--kouler-sousou); max-height: 33vh;"
        src="{{ event.img|randImg }}"
        class="d-block w-100 mb-3 object-fit-cover"
        alt="{{ event.name }}">
      <h1>
        <small>
            {{ event.datetime|date:'l j F'|capfirst }} <br />
            {{ event.datetime|time:'H\hi' }} <br />
        </small>
        {{ event.name }}
      </h1>
    </header>
  
    <!-- tags -->
    <p>
        {% for tag  in event.tag.all %}
        <span class="badge text-bg-info me-1">{{ tag }}</span>
        {% endfor %}
    </p>
  
    <p class="lead">{{ event.short_description }}</p>
    
    {% if event.gallery %}
    <div id="eventCarousel" class="carousel slide mb-3">
      <div class="carousel-inner" style="max-height: 33vh;">
        <div class="carousel-item active">
          <img style="background-color: var(--kouler-kari)" src="../../assets/motif/sevronkler.svg" class="d-inline-block w-50"
            alt="..."><img style="background-color: var(--kouler-losean)" src="../../assets/motif/sevronkler.svg" class="d-inline-block w-50"
            alt="...">
        </div>
        <div class="carousel-item">
          <img style="background-color: var(--kouler-letsi)" src="../../assets/motif/sevronkler.svg" class="d-inline-block w-50"
            alt="..."><img style="background-color: var(--kouler-piton)" src="../../assets/motif/sevronkler.svg" class="d-inline-block w-50"
            alt="...">
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#eventCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#eventCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
    {% endif %}
  
    <!-- booking panel -->
    <div class="offcanvas-start offcanvas" tabindex="-1" id="bookingPanel" aria-labelledby="bookingPanelLabel">
      <div class="offcanvas-header">
          <h5 class="offcanvas-title" id="bookingPanelLabel">Je réserve ma place</h5>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <h4>Email de contact</h4>
        <p><code>contact@tibillet.re</code></p>
        
        <div class="mb-3">
          <label for="booking-regular" class="form-label">Places plein tarif</label>
          <input type="number" class="form-control" id="booking-regular">
        </div>
        <div class="mb-3">
          <label for="booking-a11y" class="form-label">Places adhérent·e</label>
          <input type="number" class="form-control" id="booking-a11y">
        </div>
        <h4>Total : 0 place(s) pour <span class="fs-5 badge bg-secondary-subtle mb-md-0">0,00€</span></h2>
        <p>
            Jauge maximale de {{ event.jauge_max }} personnes et un nombre de
            billets limité à {{ event.max_per_user }} par réservation. Billets
            nominatifs.
        </p>
        
        <div class="position-absolute bottom-0 start-0 end-0 p-3">
            <a href="." class="btn btn-primary d-block mb-3">Confirmer la réservation</a>
            <a href="." class="btn btn-danger d-block">Annuler</a>
        </div>
      </div>
    </div>
  
    <button
        class="btn btn-lg btn-primary w-100 mb-5"
        type="button"
        data-bs-toggle="offcanvas"
        data-bs-target="#bookingPanel"
        aria-controls="bookingPanel">
        Je réserve ma place
    </button>
  
    <!-- info sections -->
    <div class="accordion accordion-flush mb-3" id="infoAccordion">
      {% if event.long_description %}
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button text-dark"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#schedule"
            aria-expanded="true"
            aria-controls="schedule"
            style="background: var(--mayaj-pons);">
            Programme
          </button>
        </h2>
        <div id="schedule" class="accordion-collapse collapse" data-bs-parent="#infoAccordion">
          <div class="accordion-body">
            <p>{{ event.long_description }}</p>
          </div>
        </div>
      </div>
      {% endif %}
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button text-dark"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#timeAndPlace"
            aria-expanded="true"
            aria-controls="timeAndPlace"
            style="background: var(--mayaj-pons);">
            Heure et lieu
          </button>
        </h2>
        <div id="timeAndPlace" class="accordion-collapse collapse" data-bs-parent="#infoAccordion">
          <div class="accordion-body">
            <ul class="list-group list-group-horizontal-xl">
              <li class="list-group-item border-start-0 border-end-0 rounded-0 px-0 py-3 p-xl-3">
                <i class="bi bi-calendar-check me-3"></i>
                {{ event.datetime|date:'j F Y, H:i' }}
              </li>
              <li class="list-group-item border-start-0 border-end-0 px-0 py-3 p-xl-3">
                <div class="card border-0">
                  <div class="row g-0">
                    <div class="col-auto">
                      <i class="bi bi-house-fill me-1"></i>
                    </div>
                    <div class="col">
                      <div class="card-body py-0">
                        <h5 class="card-title">Secret Place</h5>
                        <p class="card-text">
                          <span class="badge text-bg-info me-1">Bistrot</span>
                          <span class="badge text-bg-info me-1">Tous les âges</span>
                          <span class="badge text-bg-info me-1">Accès PMR</span>
                        </p>
                        <p class="card-text mb-0">
                          <a href="#" class="btn btn-outline-secondary">
                            Voir le lieu
                          </a>
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </li>
              <li class="list-group-item border-start-0 border-end-0 px-0 py-3 p-xl-3">
                <i class="bi bi-geo-alt-fill me-3"></i>
                25 rue Saint-Exupéry,<br/>
                34430 Saint-Jean-de-Védas
              </li>
              <li class="list-group-item border-start-0 border-end-0 rounded-0 px-0 py-3 p-xl-3">
                <i class="bi bi-bus-front-fill me-3"></i>
                5mn de marche de l'arrêt Grismuguet, ligne 5 direction Champiply
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header" id="book-now">
          <button class="accordion-button text-dark"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#get-involved"
            aria-expanded="true"
            aria-controls="get-involved"
            style="background: var(--mayaj-pons);">
            Appel à volontaires
          </button>
        </h2>
        <div id="get-involved" class="accordion-collapse collapse" data-bs-parent="#infoAccordion">
          <div class="accordion-body">
            <p>
              <i class="bi bi-megaphone-fill"></i>
              <a href="#">La TAF et Boomerang</a> cherchent 5 volontaires pour
              assurer entrée, bar et service de sécu durant la soirée.
              Compensation en monnaie-heure sur la carte TiBillet.
            </p>
            <p>
              <a href="#" class="btn btn-outline-secondary">
                Fichier d'orga des bénévoles
              </a>
            </p>
  
            <div class="alert alert-warning" role="alert">
              <h4>
                <i class="bi bi-exclamation-diamond-fill"></i>
                Rappel
              </h4>
              L'organisation n'est ni votre patron·ne, ni votre ami·e ! Pour le
              confort de toustes, proposez-vous seulement sur des postes qui vous
              plaisent d'assurer, et n'hésitez pas à refuser des conditions qui
              vous déplaisent. <a href="#">
                Si vous vous sentez pris·e pour eun
                employé·, parlez-en au réseau local
              </a>, c'est inacceptable.
            </div>
  
          </div>
        </div>
      </div>
  
  </main>
  {% endblock %}
